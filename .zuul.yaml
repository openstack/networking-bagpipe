- project:
    templates:
      - openstack-python3-ussuri-jobs-neutron
      - publish-openstack-docs-pti
      - release-notes-jobs-python3
      - check-requirements
      - periodic-stable-jobs-neutron
    check:
      jobs:
        - openstack-tox-lower-constraints:
            # Currently, we cannot specify that we want neutron
            # checked out from master using tox-siblings for this
            # job, so this always fails.
            voting: false
        - openstack-tox-pep8:
            required-projects:
              - openstack/horizon
              - openstack/networking-bgpvpn
              - openstack/networking-sfc
        - openstack-tox-py36:
            required-projects:
              - openstack/horizon
              - openstack/networking-bgpvpn
              - openstack/networking-sfc
        - openstack-tox-py37:
            required-projects:
              - openstack/horizon
              - openstack/networking-bgpvpn
              - openstack/networking-sfc
        - openstack-tox-py38:
            required-projects:
              - openstack/horizon
              - openstack/networking-bgpvpn
              - openstack/networking-sfc
        - openstack-tox-cover:
            required-projects:
              - openstack/horizon
              - openstack/neutron
              - openstack/networking-bgpvpn
              - openstack/networking-sfc
        - neutron-tempest-plugin-bgpvpn-bagpipe-ussuri:
            irrelevant-files:
              - ^(test-|)requirements.txt$
              - ^setup.cfg$
        - networking-bagpipe-dsvm-fullstack:
            voting: false
        - networking-bagpipe-tempest
    gate:
      jobs:
        - openstack-tox-pep8:
            required-projects:
              - openstack/horizon
              - openstack/networking-bgpvpn
              - openstack/networking-sfc
        - openstack-tox-py36:
            required-projects:
              - openstack/horizon
              - openstack/networking-bgpvpn
              - openstack/networking-sfc
        - openstack-tox-py37:
            required-projects:
              - openstack/horizon
              - openstack/networking-bgpvpn
              - openstack/networking-sfc
        - openstack-tox-py38:
            required-projects:
              - openstack/horizon
              - openstack/networking-bgpvpn
              - openstack/networking-sfc
        - neutron-tempest-plugin-bgpvpn-bagpipe-ussuri:
            irrelevant-files:
              - ^(test-|)requirements.txt$
              - ^setup.cfg$
        - networking-bagpipe-tempest

- job:
    name: networking-bagpipe-tempest
    parent: tempest-full-py3
    timeout: 10800
    required-projects:
      - openstack/tempest
      - openstack/neutron
      - openstack/networking-bagpipe
    vars:
      tempest_concurrency: 4
    irrelevant-files:
      - ^(test-|)requirements.txt$
      - ^setup.cfg$

- job:
    name: networking-bagpipe-dsvm-fullstack
    parent: neutron-fullstack
    timeout: 7800
    required-projects:
      - openstack/neutron
      - openstack/networking-bgpvpn
      - openstack/networking-sfc
    vars:
      tox_envlist: dsvm-fullstack
      project_name: networking-bagpipe
